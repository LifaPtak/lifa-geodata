<Script>
    let posts = document.getElementsByClassName("fusion-post-cards")[0].getElementsByTagName("ul")[1].getElementsByTagName("li"); //her få koden fadt i alle de individuelle medarbejder posts
    document.getElementById("notfound").style.display = "none";
    let textarr = [];
    let texts = [];
    for(let i = 0; i < posts.length; i++){ //koden laver en array for hver medarbejder der bliver til sidst bliver samlet i en stor array af arrays
        for(let j = 0; j < 5; j++){
            texts.push(clean(posts[i].getElementsByTagName("p")[j].innerText)); //alt tekst bliver lagt ind i arrayet
        }
      for(let j = 0; j < posts[i].classList.length; j++){ //alle classer bliver lagt ind i arrayet
            let cl = posts[i].classList[j];
            switch (true){
                case  cl.includes("fusion") || cl.includes("post"):
                    break;
                default:
                  texts.push(clean(cl));
            }
        }
        textarr.push(texts); //arrayet bliver langt ind i den store array af arrays
        texts = [];
    }

    function filter(){ //funktionen der tager brugerens input og viser de medarbejder med matchende søgeord
        let fields = document.getElementById("filter").getElementsByClassName("fusion-form-input");
        let input = [];
        for(let i = 0; i < fields.length; i++){ //brugerens input bliver samlet til en array
            let add = clean(fields[i].value).split(/[, ]+/);
            input = input.concat(add);
        }
        let num = 0;
        for(let i = 0; i < posts.length; i++){ //hver medarbejder bliver tjekket om indeholder matchende søgeord, hvis ja bliver de vist, hvis nej bliver de skjult
            if(check(textarr[i], input) !== 0){
                posts[i].style.display = "none";
            }else{
                posts[i].style.display = "block";
              num++; //taler hvor mange der bliver vist
            }
        }
        if(num !== 0){ //hvis ingen bliver vist vises "fandt intet" beskeden
            document.getElementById("notfound").style.display = "none";
        }else{
            document.getElementById("notfound").style.display = "block";
        }
    }

    function clean(str){ //funktionen der sørger for at tekst koden skal håndtere er i den rigtige format
        return(str.toLowerCase().replace(/[/:.]/g, "").replace(/å/g, "aa").replace(/æ/g, "ae").replace(/ø/g, "oe"));
    }
	 
    function check(arr, inp){ //funktionen der tager in array fra en medarbejder og en array med brugerens input og tjekker hvor mange ord der matcher og returnere det tal
        let num = 0;
        for(let i = 0; i < inp.length; i++){
            if(arr.filter(text => text.includes(inp[i])).length == 0){
                num++;
            }
        }
        return(num);
    }
   
    //her placeres EventListener på hvert input felt
    fields = document.getElementById("filter").getElementsByClassName("fusion-form-input");
    for(let i = 0; i < fields.length; i++){
        fields[i].addEventListener("keyup", filter);
        fields[i].addEventListener("change", filter);
    }
    
    //den sidste del stopper formen i at genlæse siden når brugeren trykker 'enter'
    let forms = document.getElementsByTagName("form");
    for(const form of forms){
        form.addEventListener('submit', function(event) {
            event.preventDefault();
        });
    }
</Script>